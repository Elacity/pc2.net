var ns=Object.defineProperty;var rs=(e,l,t)=>l in e?ns(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t;var U=(e,l,t)=>rs(e,typeof l!="symbol"?l+"":l,t);import{c as is,r as os,n as as,b as ls,E as cs,d as ds,e as us,f as fs,p as hs,N as ps,A as gs,h as ms,S as Es,D as bs,i as ys,j as Ns,k as Ps,l as As,m as Ts,o as xs,q as Is,t as ws,u as Ss,v as Cs,w as vs,x as Rs,y as _s,C as Os,z as ks,B as $s,F as Fs,G as Vs,Q as Ls,H as qs,I as Us,J as Ws,K as Bs,L as Ms,M as zs,O as Hs,R as Xs,P as js,T as Gs,U as St,W as Ks,X as Z,a as Ct,g as vt}from"./index-DjS7B8jB.js";import{b as Js,f as Zs,t as Ys,c as Qs,s as Ds,F as en,H as tn,r as Rt,e as q,i as sn,u as nn,g as _t}from"./date-utils-CnaK6UUR.js";import"./index-CaXbrBtJ.js";import{N as rn}from"./noAuth-BRTlyyWt.js";import{c as on}from"./create-aggregated-client-sX0lpe6c.js";function nt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(l){return"%"+l.charCodeAt(0).toString(16).toUpperCase()})}const Ot=e=>{const l="#text";for(const t in e)e.hasOwnProperty(t)&&e[t][l]!==void 0?e[t]=e[t][l]:typeof e[t]=="object"&&e[t]!==null&&(e[t]=Ot(e[t]));return e};var ce={},de={},rt;function He(){return rt||(rt=1,function(e){const l=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=l+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",f="["+l+"]["+t+"]*",E=new RegExp("^"+f+"$"),T=function(i,a){const n=[];let s=a.exec(i);for(;s;){const b=[];b.startIndex=a.lastIndex-s[0].length;const h=s.length;for(let w=0;w<h;w++)b.push(s[w]);n.push(b),s=a.exec(i)}return n},r=function(i){const a=E.exec(i);return!(a===null||typeof a>"u")};e.isExist=function(i){return typeof i<"u"},e.isEmptyObject=function(i){return Object.keys(i).length===0},e.merge=function(i,a,n){if(a){const s=Object.keys(a),b=s.length;for(let h=0;h<b;h++)n==="strict"?i[s[h]]=[a[s[h]]]:i[s[h]]=a[s[h]]}},e.getValue=function(i){return e.isExist(i)?i:""},e.isName=r,e.getAllMatches=T,e.nameRegexp=f}(de)),de}var it;function kt(){if(it)return ce;it=1;const e=He(),l={allowBooleanAttributes:!1,unpairedTags:[]};ce.validate=function(c,u){u=Object.assign({},l,u);const P=[];let d=!1,m=!1;c[0]==="\uFEFF"&&(c=c.substr(1));for(let o=0;o<c.length;o++)if(c[o]==="<"&&c[o+1]==="?"){if(o+=2,o=f(c,o),o.err)return o}else if(c[o]==="<"){let N=o;if(o++,c[o]==="!"){o=E(c,o);continue}else{let y=!1;c[o]==="/"&&(y=!0,o++);let p="";for(;o<c.length&&c[o]!==">"&&c[o]!==" "&&c[o]!=="	"&&c[o]!==`
`&&c[o]!=="\r";o++)p+=c[o];if(p=p.trim(),p[p.length-1]==="/"&&(p=p.substring(0,p.length-1),o--),!I(p)){let g;return p.trim().length===0?g="Invalid space after '<'.":g="Tag '"+p+"' is an invalid name.",h("InvalidTag",g,x(c,o))}const O=i(c,o);if(O===!1)return h("InvalidAttr","Attributes for '"+p+"' have open quote.",x(c,o));let A=O.value;if(o=O.index,A[A.length-1]==="/"){const g=o-A.length;A=A.substring(0,A.length-1);const _=n(A,u);if(_===!0)d=!0;else return h(_.err.code,_.err.msg,x(c,g+_.err.line))}else if(y)if(O.tagClosed){if(A.trim().length>0)return h("InvalidTag","Closing tag '"+p+"' can't have attributes or invalid starting.",x(c,N));if(P.length===0)return h("InvalidTag","Closing tag '"+p+"' has not been opened.",x(c,N));{const g=P.pop();if(p!==g.tagName){let _=x(c,g.tagStartPos);return h("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+_.line+", col "+_.col+") instead of closing tag '"+p+"'.",x(c,N))}P.length==0&&(m=!0)}}else return h("InvalidTag","Closing tag '"+p+"' doesn't have proper closing.",x(c,o));else{const g=n(A,u);if(g!==!0)return h(g.err.code,g.err.msg,x(c,o-A.length+g.err.line));if(m===!0)return h("InvalidXml","Multiple possible root nodes found.",x(c,o));u.unpairedTags.indexOf(p)!==-1||P.push({tagName:p,tagStartPos:N}),d=!0}for(o++;o<c.length;o++)if(c[o]==="<")if(c[o+1]==="!"){o++,o=E(c,o);continue}else if(c[o+1]==="?"){if(o=f(c,++o),o.err)return o}else break;else if(c[o]==="&"){const g=b(c,o);if(g==-1)return h("InvalidChar","char '&' is not expected.",x(c,o));o=g}else if(m===!0&&!t(c[o]))return h("InvalidXml","Extra text at the end",x(c,o));c[o]==="<"&&o--}}else{if(t(c[o]))continue;return h("InvalidChar","char '"+c[o]+"' is not expected.",x(c,o))}if(d){if(P.length==1)return h("InvalidTag","Unclosed tag '"+P[0].tagName+"'.",x(c,P[0].tagStartPos));if(P.length>0)return h("InvalidXml","Invalid '"+JSON.stringify(P.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return h("InvalidXml","Start tag expected.",1);return!0};function t(c){return c===" "||c==="	"||c===`
`||c==="\r"}function f(c,u){const P=u;for(;u<c.length;u++)if(c[u]=="?"||c[u]==" "){const d=c.substr(P,u-P);if(u>5&&d==="xml")return h("InvalidXml","XML declaration allowed only at the start of the document.",x(c,u));if(c[u]=="?"&&c[u+1]==">"){u++;break}else continue}return u}function E(c,u){if(c.length>u+5&&c[u+1]==="-"&&c[u+2]==="-"){for(u+=3;u<c.length;u++)if(c[u]==="-"&&c[u+1]==="-"&&c[u+2]===">"){u+=2;break}}else if(c.length>u+8&&c[u+1]==="D"&&c[u+2]==="O"&&c[u+3]==="C"&&c[u+4]==="T"&&c[u+5]==="Y"&&c[u+6]==="P"&&c[u+7]==="E"){let P=1;for(u+=8;u<c.length;u++)if(c[u]==="<")P++;else if(c[u]===">"&&(P--,P===0))break}else if(c.length>u+9&&c[u+1]==="["&&c[u+2]==="C"&&c[u+3]==="D"&&c[u+4]==="A"&&c[u+5]==="T"&&c[u+6]==="A"&&c[u+7]==="["){for(u+=8;u<c.length;u++)if(c[u]==="]"&&c[u+1]==="]"&&c[u+2]===">"){u+=2;break}}return u}const T='"',r="'";function i(c,u){let P="",d="",m=!1;for(;u<c.length;u++){if(c[u]===T||c[u]===r)d===""?d=c[u]:d!==c[u]||(d="");else if(c[u]===">"&&d===""){m=!0;break}P+=c[u]}return d!==""?!1:{value:P,index:u,tagClosed:m}}const a=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function n(c,u){const P=e.getAllMatches(c,a),d={};for(let m=0;m<P.length;m++){if(P[m][1].length===0)return h("InvalidAttr","Attribute '"+P[m][2]+"' has no space in starting.",k(P[m]));if(P[m][3]!==void 0&&P[m][4]===void 0)return h("InvalidAttr","Attribute '"+P[m][2]+"' is without value.",k(P[m]));if(P[m][3]===void 0&&!u.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+P[m][2]+"' is not allowed.",k(P[m]));const o=P[m][2];if(!w(o))return h("InvalidAttr","Attribute '"+o+"' is an invalid name.",k(P[m]));if(!d.hasOwnProperty(o))d[o]=1;else return h("InvalidAttr","Attribute '"+o+"' is repeated.",k(P[m]))}return!0}function s(c,u){let P=/\d/;for(c[u]==="x"&&(u++,P=/[\da-fA-F]/);u<c.length;u++){if(c[u]===";")return u;if(!c[u].match(P))break}return-1}function b(c,u){if(u++,c[u]===";")return-1;if(c[u]==="#")return u++,s(c,u);let P=0;for(;u<c.length;u++,P++)if(!(c[u].match(/\w/)&&P<20)){if(c[u]===";")break;return-1}return u}function h(c,u,P){return{err:{code:c,msg:u,line:P.line||P,col:P.col}}}function w(c){return e.isName(c)}function I(c){return e.isName(c)}function x(c,u){const P=c.substring(0,u).split(/\r?\n/);return{line:P.length,col:P[P.length-1].length+1}}function k(c){return c.startIndex+c[1].length}return ce}var oe={},ot;function an(){if(ot)return oe;ot=1;const e={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,f){return f},attributeValueProcessor:function(t,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,f,E){return t}},l=function(t){return Object.assign({},e,t)};return oe.buildOptions=l,oe.defaultOptions=e,oe}var ue,at;function ln(){if(at)return ue;at=1;class e{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,f){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:f})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}return ue=e,ue}var fe,lt;function cn(){if(lt)return fe;lt=1;const e=He();function l(n,s){const b={};if(n[s+3]==="O"&&n[s+4]==="C"&&n[s+5]==="T"&&n[s+6]==="Y"&&n[s+7]==="P"&&n[s+8]==="E"){s=s+9;let h=1,w=!1,I=!1,x="";for(;s<n.length;s++)if(n[s]==="<"&&!I){if(w&&E(n,s))s+=7,[entityName,val,s]=t(n,s+1),val.indexOf("&")===-1&&(b[a(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(w&&T(n,s))s+=8;else if(w&&r(n,s))s+=8;else if(w&&i(n,s))s+=9;else if(f)I=!0;else throw new Error("Invalid DOCTYPE");h++,x=""}else if(n[s]===">"){if(I?n[s-1]==="-"&&n[s-2]==="-"&&(I=!1,h--):h--,h===0)break}else n[s]==="["?w=!0:x+=n[s];if(h!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:b,i:s}}function t(n,s){let b="";for(;s<n.length&&n[s]!=="'"&&n[s]!=='"';s++)b+=n[s];if(b=b.trim(),b.indexOf(" ")!==-1)throw new Error("External entites are not supported");const h=n[s++];let w="";for(;s<n.length&&n[s]!==h;s++)w+=n[s];return[b,w,s]}function f(n,s){return n[s+1]==="!"&&n[s+2]==="-"&&n[s+3]==="-"}function E(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="N"&&n[s+4]==="T"&&n[s+5]==="I"&&n[s+6]==="T"&&n[s+7]==="Y"}function T(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="L"&&n[s+4]==="E"&&n[s+5]==="M"&&n[s+6]==="E"&&n[s+7]==="N"&&n[s+8]==="T"}function r(n,s){return n[s+1]==="!"&&n[s+2]==="A"&&n[s+3]==="T"&&n[s+4]==="T"&&n[s+5]==="L"&&n[s+6]==="I"&&n[s+7]==="S"&&n[s+8]==="T"}function i(n,s){return n[s+1]==="!"&&n[s+2]==="N"&&n[s+3]==="O"&&n[s+4]==="T"&&n[s+5]==="A"&&n[s+6]==="T"&&n[s+7]==="I"&&n[s+8]==="O"&&n[s+9]==="N"}function a(n){if(e.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}return fe=l,fe}var he,ct;function dn(){if(ct)return he;ct=1;const e=/^[-+]?0x[a-fA-F0-9]+$/,l=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,t={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function f(r,i={}){if(i=Object.assign({},t,i),!r||typeof r!="string")return r;let a=r.trim();if(i.skipLike!==void 0&&i.skipLike.test(a))return r;if(r==="0")return 0;if(i.hex&&e.test(a))return T(a,16);if(a.search(/[eE]/)!==-1){const n=a.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(i.leadingZeros)a=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return r;return i.eNotation?Number(a):r}else return r}else{const n=l.exec(a);if(n){const s=n[1],b=n[2];let h=E(n[3]);if(!i.leadingZeros&&b.length>0&&s&&a[2]!==".")return r;if(!i.leadingZeros&&b.length>0&&!s&&a[1]!==".")return r;if(i.leadingZeros&&b===r)return 0;{const w=Number(a),I=""+w;return I.search(/[eE]/)!==-1?i.eNotation?w:r:a.indexOf(".")!==-1?I==="0"&&h===""||I===h||s&&I==="-"+h?w:r:b?h===I||s+h===I?w:r:a===I||a===s+I?w:r}}else return r}}function E(r){return r&&r.indexOf(".")!==-1&&(r=r.replace(/0+$/,""),r==="."?r="0":r[0]==="."?r="0"+r:r[r.length-1]==="."&&(r=r.substr(0,r.length-1))),r}function T(r,i){if(parseInt)return parseInt(r,i);if(Number.parseInt)return Number.parseInt(r,i);if(window&&window.parseInt)return window.parseInt(r,i);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return he=f,he}var pe,dt;function un(){if(dt)return pe;dt=1;const e=He(),l=ln(),t=cn(),f=dn();class E{constructor(m){this.options=m,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(o,N)=>String.fromCharCode(Number.parseInt(N,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(o,N)=>String.fromCharCode(Number.parseInt(N,16))}},this.addExternalEntities=T,this.parseXml=s,this.parseTextData=r,this.resolveNameSpace=i,this.buildAttributesMap=n,this.isItStopNode=I,this.replaceEntitiesValue=h,this.readStopNodeData=u,this.saveTextToParentTag=w,this.addChild=b}}function T(d){const m=Object.keys(d);for(let o=0;o<m.length;o++){const N=m[o];this.lastEntities[N]={regex:new RegExp("&"+N+";","g"),val:d[N]}}}function r(d,m,o,N,y,p,O){if(d!==void 0&&(this.options.trimValues&&!N&&(d=d.trim()),d.length>0)){O||(d=this.replaceEntitiesValue(d));const A=this.options.tagValueProcessor(m,d,o,y,p);return A==null?d:typeof A!=typeof d||A!==d?A:this.options.trimValues?P(d,this.options.parseTagValue,this.options.numberParseOptions):d.trim()===d?P(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function i(d){if(this.options.removeNSPrefix){const m=d.split(":"),o=d.charAt(0)==="/"?"/":"";if(m[0]==="xmlns")return"";m.length===2&&(d=o+m[1])}return d}const a=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function n(d,m,o){if(!this.options.ignoreAttributes&&typeof d=="string"){const N=e.getAllMatches(d,a),y=N.length,p={};for(let O=0;O<y;O++){const A=this.resolveNameSpace(N[O][1]);let g=N[O][4],_=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&(_=this.options.transformAttributeName(_)),_==="__proto__"&&(_="#__proto__"),g!==void 0){this.options.trimValues&&(g=g.trim()),g=this.replaceEntitiesValue(g);const C=this.options.attributeValueProcessor(A,g,m);C==null?p[_]=g:typeof C!=typeof g||C!==g?p[_]=C:p[_]=P(g,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(p[_]=!0)}if(!Object.keys(p).length)return;if(this.options.attributesGroupName){const O={};return O[this.options.attributesGroupName]=p,O}return p}}const s=function(d){d=d.replace(/\r\n?/g,`
`);const m=new l("!xml");let o=m,N="",y="";for(let p=0;p<d.length;p++)if(d[p]==="<")if(d[p+1]==="/"){const A=k(d,">",p,"Closing Tag is not closed.");let g=d.substring(p+2,A).trim();if(this.options.removeNSPrefix){const z=g.indexOf(":");z!==-1&&(g=g.substr(z+1))}this.options.transformTagName&&(g=this.options.transformTagName(g)),o&&(N=this.saveTextToParentTag(N,o,y));const _=y.substring(y.lastIndexOf(".")+1);if(g&&this.options.unpairedTags.indexOf(g)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${g}>`);let C=0;_&&this.options.unpairedTags.indexOf(_)!==-1?(C=y.lastIndexOf(".",y.lastIndexOf(".")-1),this.tagsNodeStack.pop()):C=y.lastIndexOf("."),y=y.substring(0,C),o=this.tagsNodeStack.pop(),N="",p=A}else if(d[p+1]==="?"){let A=c(d,p,!1,"?>");if(!A)throw new Error("Pi Tag is not closed.");if(N=this.saveTextToParentTag(N,o,y),!(this.options.ignoreDeclaration&&A.tagName==="?xml"||this.options.ignorePiTags)){const g=new l(A.tagName);g.add(this.options.textNodeName,""),A.tagName!==A.tagExp&&A.attrExpPresent&&(g[":@"]=this.buildAttributesMap(A.tagExp,y,A.tagName)),this.addChild(o,g,y)}p=A.closeIndex+1}else if(d.substr(p+1,3)==="!--"){const A=k(d,"-->",p+4,"Comment is not closed.");if(this.options.commentPropName){const g=d.substring(p+4,A-2);N=this.saveTextToParentTag(N,o,y),o.add(this.options.commentPropName,[{[this.options.textNodeName]:g}])}p=A}else if(d.substr(p+1,2)==="!D"){const A=t(d,p);this.docTypeEntities=A.entities,p=A.i}else if(d.substr(p+1,2)==="!["){const A=k(d,"]]>",p,"CDATA is not closed.")-2,g=d.substring(p+9,A);N=this.saveTextToParentTag(N,o,y);let _=this.parseTextData(g,o.tagname,y,!0,!1,!0,!0);_==null&&(_=""),this.options.cdataPropName?o.add(this.options.cdataPropName,[{[this.options.textNodeName]:g}]):o.add(this.options.textNodeName,_),p=A+2}else{let A=c(d,p,this.options.removeNSPrefix),g=A.tagName;const _=A.rawTagName;let C=A.tagExp,z=A.attrExpPresent,tt=A.closeIndex;this.options.transformTagName&&(g=this.options.transformTagName(g)),o&&N&&o.tagname!=="!xml"&&(N=this.saveTextToParentTag(N,o,y,!1));const st=o;if(st&&this.options.unpairedTags.indexOf(st.tagname)!==-1&&(o=this.tagsNodeStack.pop(),y=y.substring(0,y.lastIndexOf("."))),g!==m.tagname&&(y+=y?"."+g:g),this.isItStopNode(this.options.stopNodes,y,g)){let M="";if(C.length>0&&C.lastIndexOf("/")===C.length-1)g[g.length-1]==="/"?(g=g.substr(0,g.length-1),y=y.substr(0,y.length-1),C=g):C=C.substr(0,C.length-1),p=A.closeIndex;else if(this.options.unpairedTags.indexOf(g)!==-1)p=A.closeIndex;else{const le=this.readStopNodeData(d,_,tt+1);if(!le)throw new Error(`Unexpected end of ${_}`);p=le.i,M=le.tagContent}const ae=new l(g);g!==C&&z&&(ae[":@"]=this.buildAttributesMap(C,y,g)),M&&(M=this.parseTextData(M,g,y,!0,z,!0,!0)),y=y.substr(0,y.lastIndexOf(".")),ae.add(this.options.textNodeName,M),this.addChild(o,ae,y)}else{if(C.length>0&&C.lastIndexOf("/")===C.length-1){g[g.length-1]==="/"?(g=g.substr(0,g.length-1),y=y.substr(0,y.length-1),C=g):C=C.substr(0,C.length-1),this.options.transformTagName&&(g=this.options.transformTagName(g));const M=new l(g);g!==C&&z&&(M[":@"]=this.buildAttributesMap(C,y,g)),this.addChild(o,M,y),y=y.substr(0,y.lastIndexOf("."))}else{const M=new l(g);this.tagsNodeStack.push(o),g!==C&&z&&(M[":@"]=this.buildAttributesMap(C,y,g)),this.addChild(o,M,y),o=M}N="",p=tt}}else N+=d[p];return m.child};function b(d,m,o){const N=this.options.updateTag(m.tagname,o,m[":@"]);N===!1||(typeof N=="string"&&(m.tagname=N),d.addChild(m))}const h=function(d){if(this.options.processEntities){for(let m in this.docTypeEntities){const o=this.docTypeEntities[m];d=d.replace(o.regx,o.val)}for(let m in this.lastEntities){const o=this.lastEntities[m];d=d.replace(o.regex,o.val)}if(this.options.htmlEntities)for(let m in this.htmlEntities){const o=this.htmlEntities[m];d=d.replace(o.regex,o.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function w(d,m,o,N){return d&&(N===void 0&&(N=Object.keys(m.child).length===0),d=this.parseTextData(d,m.tagname,o,!1,m[":@"]?Object.keys(m[":@"]).length!==0:!1,N),d!==void 0&&d!==""&&m.add(this.options.textNodeName,d),d=""),d}function I(d,m,o){const N="*."+o;for(const y in d){const p=d[y];if(N===p||m===p)return!0}return!1}function x(d,m,o=">"){let N,y="";for(let p=m;p<d.length;p++){let O=d[p];if(N)O===N&&(N="");else if(O==='"'||O==="'")N=O;else if(O===o[0])if(o[1]){if(d[p+1]===o[1])return{data:y,index:p}}else return{data:y,index:p};else O==="	"&&(O=" ");y+=O}}function k(d,m,o,N){const y=d.indexOf(m,o);if(y===-1)throw new Error(N);return y+m.length-1}function c(d,m,o,N=">"){const y=x(d,m+1,N);if(!y)return;let p=y.data;const O=y.index,A=p.search(/\s/);let g=p,_=!0;A!==-1&&(g=p.substring(0,A),p=p.substring(A+1).trimStart());const C=g;if(o){const z=g.indexOf(":");z!==-1&&(g=g.substr(z+1),_=g!==y.data.substr(z+1))}return{tagName:g,tagExp:p,closeIndex:O,attrExpPresent:_,rawTagName:C}}function u(d,m,o){const N=o;let y=1;for(;o<d.length;o++)if(d[o]==="<")if(d[o+1]==="/"){const p=k(d,">",o,`${m} is not closed`);if(d.substring(o+2,p).trim()===m&&(y--,y===0))return{tagContent:d.substring(N,o),i:p};o=p}else if(d[o+1]==="?")o=k(d,"?>",o+1,"StopNode is not closed.");else if(d.substr(o+1,3)==="!--")o=k(d,"-->",o+3,"StopNode is not closed.");else if(d.substr(o+1,2)==="![")o=k(d,"]]>",o,"StopNode is not closed.")-2;else{const p=c(d,o,">");p&&((p&&p.tagName)===m&&p.tagExp[p.tagExp.length-1]!=="/"&&y++,o=p.closeIndex)}}function P(d,m,o){if(m&&typeof d=="string"){const N=d.trim();return N==="true"?!0:N==="false"?!1:f(d,o)}else return e.isExist(d)?d:""}return pe=E,pe}var ge={},ut;function fn(){if(ut)return ge;ut=1;function e(T,r){return l(T,r)}function l(T,r,i){let a;const n={};for(let s=0;s<T.length;s++){const b=T[s],h=t(b);let w="";if(i===void 0?w=h:w=i+"."+h,h===r.textNodeName)a===void 0?a=b[h]:a+=""+b[h];else{if(h===void 0)continue;if(b[h]){let I=l(b[h],r,w);const x=E(I,r);b[":@"]?f(I,b[":@"],w,r):Object.keys(I).length===1&&I[r.textNodeName]!==void 0&&!r.alwaysCreateTextNode?I=I[r.textNodeName]:Object.keys(I).length===0&&(r.alwaysCreateTextNode?I[r.textNodeName]="":I=""),n[h]!==void 0&&n.hasOwnProperty(h)?(Array.isArray(n[h])||(n[h]=[n[h]]),n[h].push(I)):r.isArray(h,w,x)?n[h]=[I]:n[h]=I}}}return typeof a=="string"?a.length>0&&(n[r.textNodeName]=a):a!==void 0&&(n[r.textNodeName]=a),n}function t(T){const r=Object.keys(T);for(let i=0;i<r.length;i++){const a=r[i];if(a!==":@")return a}}function f(T,r,i,a){if(r){const n=Object.keys(r),s=n.length;for(let b=0;b<s;b++){const h=n[b];a.isArray(h,i+"."+h,!0,!0)?T[h]=[r[h]]:T[h]=r[h]}}}function E(T,r){const{textNodeName:i}=r,a=Object.keys(T).length;return!!(a===0||a===1&&(T[i]||typeof T[i]=="boolean"||T[i]===0))}return ge.prettify=e,ge}var me,ft;function hn(){if(ft)return me;ft=1;const{buildOptions:e}=an(),l=un(),{prettify:t}=fn(),f=kt();class E{constructor(r){this.externalEntities={},this.options=e(r)}parse(r,i){if(typeof r!="string")if(r.toString)r=r.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(i){i===!0&&(i={});const s=f.validate(r,i);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const a=new l(this.options);a.addExternalEntities(this.externalEntities);const n=a.parseXml(r);return this.options.preserveOrder||n===void 0?n:t(n,this.options)}addEntity(r,i){if(i.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(r.indexOf("&")!==-1||r.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(i==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[r]=i}}return me=E,me}var Ee,ht;function pn(){if(ht)return Ee;ht=1;const e=`
`;function l(i,a){let n="";return a.format&&a.indentBy.length>0&&(n=e),t(i,a,"",n)}function t(i,a,n,s){let b="",h=!1;for(let w=0;w<i.length;w++){const I=i[w],x=f(I);if(x===void 0)continue;let k="";if(n.length===0?k=x:k=`${n}.${x}`,x===a.textNodeName){let m=I[x];T(k,a)||(m=a.tagValueProcessor(x,m),m=r(m,a)),h&&(b+=s),b+=m,h=!1;continue}else if(x===a.cdataPropName){h&&(b+=s),b+=`<![CDATA[${I[x][0][a.textNodeName]}]]>`,h=!1;continue}else if(x===a.commentPropName){b+=s+`<!--${I[x][0][a.textNodeName]}-->`,h=!0;continue}else if(x[0]==="?"){const m=E(I[":@"],a),o=x==="?xml"?"":s;let N=I[x][0][a.textNodeName];N=N.length!==0?" "+N:"",b+=o+`<${x}${N}${m}?>`,h=!0;continue}let c=s;c!==""&&(c+=a.indentBy);const u=E(I[":@"],a),P=s+`<${x}${u}`,d=t(I[x],a,k,c);a.unpairedTags.indexOf(x)!==-1?a.suppressUnpairedNode?b+=P+">":b+=P+"/>":(!d||d.length===0)&&a.suppressEmptyNode?b+=P+"/>":d&&d.endsWith(">")?b+=P+`>${d}${s}</${x}>`:(b+=P+">",d&&s!==""&&(d.includes("/>")||d.includes("</"))?b+=s+a.indentBy+d+s:b+=d,b+=`</${x}>`),h=!0}return b}function f(i){const a=Object.keys(i);for(let n=0;n<a.length;n++){const s=a[n];if(i.hasOwnProperty(s)&&s!==":@")return s}}function E(i,a){let n="";if(i&&!a.ignoreAttributes)for(let s in i){if(!i.hasOwnProperty(s))continue;let b=a.attributeValueProcessor(s,i[s]);b=r(b,a),b===!0&&a.suppressBooleanAttributes?n+=` ${s.substr(a.attributeNamePrefix.length)}`:n+=` ${s.substr(a.attributeNamePrefix.length)}="${b}"`}return n}function T(i,a){i=i.substr(0,i.length-a.textNodeName.length-1);let n=i.substr(i.lastIndexOf(".")+1);for(let s in a.stopNodes)if(a.stopNodes[s]===i||a.stopNodes[s]==="*."+n)return!0;return!1}function r(i,a){if(i&&i.length>0&&a.processEntities)for(let n=0;n<a.entities.length;n++){const s=a.entities[n];i=i.replace(s.regex,s.val)}return i}return Ee=l,Ee}var be,pt;function gn(){if(pt)return be;pt=1;const e=pn(),l={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,i){return i},attributeValueProcessor:function(r,i){return i},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function t(r){this.options=Object.assign({},l,r),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=T),this.processTextOrObjNode=f,this.options.format?(this.indentate=E,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}t.prototype.build=function(r){return this.options.preserveOrder?e(r,this.options):(Array.isArray(r)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(r={[this.options.arrayNodeName]:r}),this.j2x(r,0).val)},t.prototype.j2x=function(r,i){let a="",n="";for(let s in r)if(Object.prototype.hasOwnProperty.call(r,s))if(typeof r[s]>"u")this.isAttribute(s)&&(n+="");else if(r[s]===null)this.isAttribute(s)?n+="":s[0]==="?"?n+=this.indentate(i)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(i)+"<"+s+"/"+this.tagEndChar;else if(r[s]instanceof Date)n+=this.buildTextValNode(r[s],s,"",i);else if(typeof r[s]!="object"){const b=this.isAttribute(s);if(b)a+=this.buildAttrPairStr(b,""+r[s]);else if(s===this.options.textNodeName){let h=this.options.tagValueProcessor(s,""+r[s]);n+=this.replaceEntitiesValue(h)}else n+=this.buildTextValNode(r[s],s,"",i)}else if(Array.isArray(r[s])){const b=r[s].length;let h="",w="";for(let I=0;I<b;I++){const x=r[s][I];if(!(typeof x>"u"))if(x===null)s[0]==="?"?n+=this.indentate(i)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(i)+"<"+s+"/"+this.tagEndChar;else if(typeof x=="object")if(this.options.oneListGroup){const k=this.j2x(x,i+1);h+=k.val,this.options.attributesGroupName&&x.hasOwnProperty(this.options.attributesGroupName)&&(w+=k.attrStr)}else h+=this.processTextOrObjNode(x,s,i);else if(this.options.oneListGroup){let k=this.options.tagValueProcessor(s,x);k=this.replaceEntitiesValue(k),h+=k}else h+=this.buildTextValNode(x,s,"",i)}this.options.oneListGroup&&(h=this.buildObjectNode(h,s,w,i)),n+=h}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const b=Object.keys(r[s]),h=b.length;for(let w=0;w<h;w++)a+=this.buildAttrPairStr(b[w],""+r[s][b[w]])}else n+=this.processTextOrObjNode(r[s],s,i);return{attrStr:a,val:n}},t.prototype.buildAttrPairStr=function(r,i){return i=this.options.attributeValueProcessor(r,""+i),i=this.replaceEntitiesValue(i),this.options.suppressBooleanAttributes&&i==="true"?" "+r:" "+r+'="'+i+'"'};function f(r,i,a){const n=this.j2x(r,a+1);return r[this.options.textNodeName]!==void 0&&Object.keys(r).length===1?this.buildTextValNode(r[this.options.textNodeName],i,n.attrStr,a):this.buildObjectNode(n.val,i,n.attrStr,a)}t.prototype.buildObjectNode=function(r,i,a,n){if(r==="")return i[0]==="?"?this.indentate(n)+"<"+i+a+"?"+this.tagEndChar:this.indentate(n)+"<"+i+a+this.closeTag(i)+this.tagEndChar;{let s="</"+i+this.tagEndChar,b="";return i[0]==="?"&&(b="?",s=""),(a||a==="")&&r.indexOf("<")===-1?this.indentate(n)+"<"+i+a+b+">"+r+s:this.options.commentPropName!==!1&&i===this.options.commentPropName&&b.length===0?this.indentate(n)+`<!--${r}-->`+this.newLine:this.indentate(n)+"<"+i+a+b+this.tagEndChar+r+this.indentate(n)+s}},t.prototype.closeTag=function(r){let i="";return this.options.unpairedTags.indexOf(r)!==-1?this.options.suppressUnpairedNode||(i="/"):this.options.suppressEmptyNode?i="/":i=`></${r}`,i},t.prototype.buildTextValNode=function(r,i,a,n){if(this.options.cdataPropName!==!1&&i===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${r}]]>`+this.newLine;if(this.options.commentPropName!==!1&&i===this.options.commentPropName)return this.indentate(n)+`<!--${r}-->`+this.newLine;if(i[0]==="?")return this.indentate(n)+"<"+i+a+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(i,r);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+i+a+this.closeTag(i)+this.tagEndChar:this.indentate(n)+"<"+i+a+">"+s+"</"+i+this.tagEndChar}},t.prototype.replaceEntitiesValue=function(r){if(r&&r.length>0&&this.options.processEntities)for(let i=0;i<this.options.entities.length;i++){const a=this.options.entities[i];r=r.replace(a.regex,a.val)}return r};function E(r){return this.options.indentBy.repeat(r)}function T(r){return r.startsWith(this.options.attributeNamePrefix)&&r!==this.options.textNodeName?r.substr(this.attrPrefixLen):!1}return be=t,be}var ye,gt;function mn(){if(gt)return ye;gt=1;const e=kt(),l=hn(),t=gn();return ye={XMLParser:l,XMLValidator:e,XMLBuilder:t},ye}var En=mn();const Xe=(e,l)=>is(e,l).then(t=>{if(t.length){const f=new En.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(a,n)=>n.trim()===""&&n.includes(`
`)?"":void 0});f.addEntity("#xD","\r"),f.addEntity("#10",`
`);let E;try{E=f.parse(t,!0)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:t}),a}const T="#text",r=Object.keys(E)[0],i=E[r];return i[T]&&(i[r]=i[T],delete i[T]),Ot(i)}return{}}),bn=async(e,l)=>{const t=await Xe(e,l);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},yn=async(e,l,t)=>({operation:ls(l).operation,region:await as(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Nn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(l,t)=>({signingProperties:{config:l,context:t}})}}function Pn(e){return{schemeId:"smithy.api#noAuth"}}const An=e=>{const l=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{l.push(Pn());break}default:l.push(Nn(e))}return l},Tn=e=>Object.assign(e,{stsClientCtor:Ge}),xn=e=>{const l=Tn(e),t=os(l);return Object.assign(t,{})},In=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),$t={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},wn="3.787.0",Sn={version:wn},Ft="required",S="type",v="fn",R="argv",J="ref",mt=!1,Ne=!0,K="booleanEquals",V="stringEquals",Vt="sigv4",Lt="sts",qt="us-east-1",$="endpoint",Et="https://sts.{Region}.{PartitionResult#dnsSuffix}",H="tree",Y="error",je="getAttr",bt={[Ft]:!1,[S]:"String"},Pe={[Ft]:!0,default:!1,[S]:"Boolean"},Ut={[J]:"Endpoint"},yt={[v]:"isSet",[R]:[{[J]:"Region"}]},L={[J]:"Region"},Nt={[v]:"aws.partition",[R]:[L],assign:"PartitionResult"},Wt={[J]:"UseFIPS"},Bt={[J]:"UseDualStack"},W={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Vt,signingName:Lt,signingRegion:qt}]},headers:{}},B={},Pt={conditions:[{[v]:V,[R]:[L,"aws-global"]}],[$]:W,[S]:$},Mt={[v]:K,[R]:[Wt,!0]},zt={[v]:K,[R]:[Bt,!0]},At={[v]:je,[R]:[{[J]:"PartitionResult"},"supportsFIPS"]},Ht={[J]:"PartitionResult"},Tt={[v]:K,[R]:[!0,{[v]:je,[R]:[Ht,"supportsDualStack"]}]},xt=[{[v]:"isSet",[R]:[Ut]}],It=[Mt],wt=[zt],Cn={parameters:{Region:bt,UseDualStack:Pe,UseFIPS:Pe,Endpoint:bt,UseGlobalEndpoint:Pe},rules:[{conditions:[{[v]:K,[R]:[{[J]:"UseGlobalEndpoint"},Ne]},{[v]:"not",[R]:xt},yt,Nt,{[v]:K,[R]:[Wt,mt]},{[v]:K,[R]:[Bt,mt]}],rules:[{conditions:[{[v]:V,[R]:[L,"ap-northeast-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-south-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-southeast-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-southeast-2"]}],endpoint:W,[S]:$},Pt,{conditions:[{[v]:V,[R]:[L,"ca-central-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-central-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-north-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-2"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-3"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"sa-east-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,qt]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-east-2"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-west-1"]}],endpoint:W,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-west-2"]}],endpoint:W,[S]:$},{endpoint:{url:Et,properties:{authSchemes:[{name:Vt,signingName:Lt,signingRegion:"{Region}"}]},headers:B},[S]:$}],[S]:H},{conditions:xt,rules:[{conditions:It,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:Y},{conditions:wt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:Y},{endpoint:{url:Ut,properties:B,headers:B},[S]:$}],[S]:H},{conditions:[yt],rules:[{conditions:[Nt],rules:[{conditions:[Mt,zt],rules:[{conditions:[{[v]:K,[R]:[Ne,At]},Tt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:B,headers:B},[S]:$}],[S]:H},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:Y}],[S]:H},{conditions:It,rules:[{conditions:[{[v]:K,[R]:[At,Ne]}],rules:[{conditions:[{[v]:V,[R]:[{[v]:je,[R]:[Ht,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:B,headers:B},[S]:$},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:B,headers:B},[S]:$}],[S]:H},{error:"FIPS is enabled but this partition does not support FIPS",[S]:Y}],[S]:H},{conditions:wt,rules:[{conditions:[Tt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:B,headers:B},[S]:$}],[S]:H},{error:"DualStack is enabled but this partition does not support DualStack",[S]:Y}],[S]:H},Pt,{endpoint:{url:Et,properties:B,headers:B},[S]:$}],[S]:H}],[S]:H},{error:"Invalid Configuration: Missing Region",[S]:Y}]},vn=Cn,Rn=new cs({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),_n=(e,l={})=>Rn.get(e,()=>ds(vn,{endpointParams:e,logger:l.logger}));fs.aws=us;const On=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Qs,base64Encoder:(e==null?void 0:e.base64Encoder)??Ys,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??_n,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??An,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:l=>l.getIdentityProvider("aws.auth#sigv4"),signer:new gs},{schemeId:"smithy.api#noAuth",identityProvider:l=>l.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rn}],logger:(e==null?void 0:e.logger)??new ps,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??hs,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Zs,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Js}),kn=e=>{const l=ms(e),t=()=>l().then(Is),f=On(e);return{...f,...e,runtime:"browser",defaultsMode:l,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??As,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(E=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ps({serviceId:f.serviceId,clientVersion:Sn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??Ns,region:(e==null?void 0:e.region)??ys("Region is missing"),requestHandler:en.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||bs),sha256:(e==null?void 0:e.sha256)??Es,streamCollector:(e==null?void 0:e.streamCollector)??Ds,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(xs)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Ts))}},$n=e=>{const l=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,f=e.credentials;return{setHttpAuthScheme(E){const T=l.findIndex(r=>r.schemeId===E.schemeId);T===-1?l.push(E):l.splice(T,1,E)},httpAuthSchemes(){return l},setHttpAuthSchemeProvider(E){t=E},httpAuthSchemeProvider(){return t},setCredentials(E){f=E},credentials(){return f}}},Fn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Vn=(e,l)=>{const t=Object.assign(ws(e),Ss(e),Cs(e),$n(e));return l.forEach(f=>f.configure(t)),Object.assign(e,vs(t),Rs(t),_s(t),Fn(t))};class Ge extends Os{constructor(...[t]){const f=kn(t||{});super(f);U(this,"config");this.initConfig=f;const E=In(f),T=ks(E),r=$s(T),i=Fs(r),a=Ls(i),n=Vs(a),s=xn(n),b=Vn(s,(t==null?void 0:t.extensions)||[]);this.config=b,this.middlewareStack.use(qs(this.config)),this.middlewareStack.use(Us(this.config)),this.middlewareStack.use(Ws(this.config)),this.middlewareStack.use(Bs(this.config)),this.middlewareStack.use(Ms(this.config)),this.middlewareStack.use(zs(this.config)),this.middlewareStack.use(Hs(this.config,{httpAuthSchemeParametersProvider:yn,identityProviderConfigProvider:async h=>new Xs({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(js(this.config))}destroy(){super.destroy()}}class X extends Gs{constructor(l){super(l),Object.setPrototypeOf(this,X.prototype)}}const Xt=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:St}}),Ln=e=>({...e,...e.Credentials&&{Credentials:Xt(e.Credentials)}});class Ke extends X{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});U(this,"name","ExpiredTokenException");U(this,"$fault","client");Object.setPrototypeOf(this,Ke.prototype)}}class Je extends X{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t});U(this,"name","MalformedPolicyDocumentException");U(this,"$fault","client");Object.setPrototypeOf(this,Je.prototype)}}class Ze extends X{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t});U(this,"name","PackedPolicyTooLargeException");U(this,"$fault","client");Object.setPrototypeOf(this,Ze.prototype)}}class Ye extends X{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t});U(this,"name","RegionDisabledException");U(this,"$fault","client");Object.setPrototypeOf(this,Ye.prototype)}}class Qe extends X{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t});U(this,"name","IDPRejectedClaimException");U(this,"$fault","client");Object.setPrototypeOf(this,Qe.prototype)}}class De extends X{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t});U(this,"name","InvalidIdentityTokenException");U(this,"$fault","client");Object.setPrototypeOf(this,De.prototype)}}const qn=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:St}}),Un=e=>({...e,...e.Credentials&&{Credentials:Xt(e.Credentials)}});class et extends X{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t});U(this,"name","IDPCommunicationErrorException");U(this,"$fault","client");Object.setPrototypeOf(this,et.prototype)}}const Wn=async(e,l)=>{const t=Yt;let f;return f=ts({...Yn(e),[Dt]:gr,[es]:Qt}),Zt(l,t,"/",void 0,f)},Bn=async(e,l)=>{const t=Yt;let f;return f=ts({...Qn(e),[Dt]:mr,[es]:Qt}),Zt(l,t,"/",void 0,f)},Mn=async(e,l)=>{if(e.statusCode>=300)return jt(e,l);const t=await Xe(e.body,l);let f={};return f=ir(t.AssumeRoleResult),{$metadata:G(e),...f}},zn=async(e,l)=>{if(e.statusCode>=300)return jt(e,l);const t=await Xe(e.body,l);let f={};return f=or(t.AssumeRoleWithWebIdentityResult),{$metadata:G(e),...f}},jt=async(e,l)=>{const t={...e,body:await bn(e.body,l)},f=Er(e,t.body);switch(f){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Hn(t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Kn(t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Jn(t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Zn(t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Xn(t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await jn(t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Gn(t);default:const E=t.body;return pr({output:e,parsedBody:E.Error,errorCode:f})}},Hn=async(e,l)=>{const t=e.body,f=ar(t.Error),E=new Ke({$metadata:G(e),...f});return Z(E,t)},Xn=async(e,l)=>{const t=e.body,f=lr(t.Error),E=new et({$metadata:G(e),...f});return Z(E,t)},jn=async(e,l)=>{const t=e.body,f=cr(t.Error),E=new Qe({$metadata:G(e),...f});return Z(E,t)},Gn=async(e,l)=>{const t=e.body,f=dr(t.Error),E=new De({$metadata:G(e),...f});return Z(E,t)},Kn=async(e,l)=>{const t=e.body,f=ur(t.Error),E=new Je({$metadata:G(e),...f});return Z(E,t)},Jn=async(e,l)=>{const t=e.body,f=fr(t.Error),E=new Ze({$metadata:G(e),...f});return Z(E,t)},Zn=async(e,l)=>{const t=e.body,f=hr(t.Error),E=new Ye({$metadata:G(e),...f});return Z(E,t)},Yn=(e,l)=>{var f,E,T,r;const t={};if(e[re]!=null&&(t[re]=e[re]),e[ie]!=null&&(t[ie]=e[ie]),e[se]!=null){const i=Gt(e[se]);((f=e[se])==null?void 0:f.length)===0&&(t.PolicyArns=[]),Object.entries(i).forEach(([a,n])=>{const s=`PolicyArns.${a}`;t[s]=n})}if(e[te]!=null&&(t[te]=e[te]),e[ee]!=null&&(t[ee]=e[ee]),e[qe]!=null){const i=rr(e[qe]);((E=e[qe])==null?void 0:E.length)===0&&(t.Tags=[]),Object.entries(i).forEach(([a,n])=>{const s=`Tags.${a}`;t[s]=n})}if(e[We]!=null){const i=nr(e[We]);((T=e[We])==null?void 0:T.length)===0&&(t.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,n])=>{const s=`TransitiveTagKeys.${a}`;t[s]=n})}if(e[Ce]!=null&&(t[Ce]=e[Ce]),e[Ve]!=null&&(t[Ve]=e[Ve]),e[Ue]!=null&&(t[Ue]=e[Ue]),e[j]!=null&&(t[j]=e[j]),e[_e]!=null){const i=tr(e[_e]);((r=e[_e])==null?void 0:r.length)===0&&(t.ProvidedContexts=[]),Object.entries(i).forEach(([a,n])=>{const s=`ProvidedContexts.${a}`;t[s]=n})}return t},Qn=(e,l)=>{var f;const t={};if(e[re]!=null&&(t[re]=e[re]),e[ie]!=null&&(t[ie]=e[ie]),e[Me]!=null&&(t[Me]=e[Me]),e[Oe]!=null&&(t[Oe]=e[Oe]),e[se]!=null){const E=Gt(e[se]);((f=e[se])==null?void 0:f.length)===0&&(t.PolicyArns=[]),Object.entries(E).forEach(([T,r])=>{const i=`PolicyArns.${T}`;t[i]=r})}return e[te]!=null&&(t[te]=e[te]),e[ee]!=null&&(t[ee]=e[ee]),t},Gt=(e,l)=>{const t={};let f=1;for(const E of e){if(E===null)continue;const T=Dn(E);Object.entries(T).forEach(([r,i])=>{t[`member.${f}.${r}`]=i}),f++}return t},Dn=(e,l)=>{const t={};return e[ze]!=null&&(t[ze]=e[ze]),t},er=(e,l)=>{const t={};return e[Re]!=null&&(t[Re]=e[Re]),e[we]!=null&&(t[we]=e[we]),t},tr=(e,l)=>{const t={};let f=1;for(const E of e){if(E===null)continue;const T=er(E);Object.entries(T).forEach(([r,i])=>{t[`member.${f}.${r}`]=i}),f++}return t},sr=(e,l)=>{const t={};return e[ve]!=null&&(t[ve]=e[ve]),e[Be]!=null&&(t[Be]=e[Be]),t},nr=(e,l)=>{const t={};let f=1;for(const E of e)E!==null&&(t[`member.${f}`]=E,f++);return t},rr=(e,l)=>{const t={};let f=1;for(const E of e){if(E===null)continue;const T=sr(E);Object.entries(T).forEach(([r,i])=>{t[`member.${f}.${r}`]=i}),f++}return t},Kt=(e,l)=>{const t={};return e[Te]!=null&&(t[Te]=q(e[Te])),e[xe]!=null&&(t[xe]=q(e[xe])),t},ir=(e,l)=>{const t={};return e[D]!=null&&(t[D]=Jt(e[D])),e[Q]!=null&&(t[Q]=Kt(e[Q])),e[ne]!=null&&(t[ne]=Rt(e[ne])),e[j]!=null&&(t[j]=q(e[j])),t},or=(e,l)=>{const t={};return e[D]!=null&&(t[D]=Jt(e[D])),e[Fe]!=null&&(t[Fe]=q(e[Fe])),e[Q]!=null&&(t[Q]=Kt(e[Q])),e[ne]!=null&&(t[ne]=Rt(e[ne])),e[ke]!=null&&(t[ke]=q(e[ke])),e[Ie]!=null&&(t[Ie]=q(e[Ie])),e[j]!=null&&(t[j]=q(e[j])),t},Jt=(e,l)=>{const t={};return e[Ae]!=null&&(t[Ae]=q(e[Ae])),e[$e]!=null&&(t[$e]=q(e[$e])),e[Le]!=null&&(t[Le]=q(e[Le])),e[Se]!=null&&(t[Se]=sn(nn(e[Se]))),t},ar=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},lr=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},cr=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},dr=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},ur=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},fr=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},hr=(e,l)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},G=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),pr=Ks(X),Zt=async(e,l,t,f,E)=>{const{hostname:T,protocol:r="https",port:i,path:a}=await e.endpoint(),n={protocol:r,hostname:T,port:i,method:"POST",path:a.endsWith("/")?a.slice(0,-1)+t:a+t,headers:l};return E!==void 0&&(n.body=E),new tn(n)},Yt={"content-type":"application/x-www-form-urlencoded"},Qt="2011-06-15",Dt="Action",Ae="AccessKeyId",gr="AssumeRole",Te="AssumedRoleId",Q="AssumedRoleUser",mr="AssumeRoleWithWebIdentity",xe="Arn",Ie="Audience",D="Credentials",we="ContextAssertion",ee="DurationSeconds",Se="Expiration",Ce="ExternalId",ve="Key",te="Policy",se="PolicyArns",Re="ProviderArn",_e="ProvidedContexts",Oe="ProviderId",ne="PackedPolicySize",ke="Provider",re="RoleArn",ie="RoleSessionName",$e="SecretAccessKey",Fe="SubjectFromWebIdentityToken",j="SourceIdentity",Ve="SerialNumber",Le="SessionToken",qe="Tags",Ue="TokenCode",We="TransitiveTagKeys",es="Version",Be="Value",Me="WebIdentityToken",ze="arn",F="message",ts=e=>Object.entries(e).map(([l,t])=>nt(l)+"="+nt(t)).join("&"),Er=(e,l)=>{var t;if(((t=l.Error)==null?void 0:t.Code)!==void 0)return l.Error.Code;if(e.statusCode==404)return"NotFound"};class ss extends Ct.classBuilder().ep($t).m(function(l,t,f,E){return[_t(f,this.serialize,this.deserialize),vt(f,l.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Ln).ser(Wn).de(Mn).build(){}class br extends Ct.classBuilder().ep($t).m(function(l,t,f,E){return[_t(f,this.serialize,this.deserialize),vt(f,l.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(qn,Un).ser(Bn).de(zn).build(){}const yr={AssumeRoleCommand:ss,AssumeRoleWithWebIdentityCommand:br};class Nr extends Ge{}on(yr,Nr);const Sr=Object.freeze(Object.defineProperty({__proto__:null,AssumeRoleCommand:ss,STSClient:Ge},Symbol.toStringTag,{value:"Module"}));export{br as A,Xt as C,Ke as E,Qe as I,Je as M,Ze as P,Ye as R,Ge as S,X as a,Nr as b,ss as c,Ln as d,De as e,qn as f,Un as g,et as h,Sr as l};
