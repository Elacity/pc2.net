const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/loadCognitoIdentity-iTF7T4_l.js","assets/date-utils-Raxu1naD.js","assets/resolveDefaultsModeConfig-D64qrBdI.js","assets/index-Da1B_bQX.js","assets/index-BBH2gUJx.css","assets/noAuth-BRTlyyWt.js","assets/loadSts-DulsvQoO.js","assets/index-C7uLyd3y.js"])))=>i.map(i=>d[i]);
var j=Object.defineProperty;var L=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var b=(e,t,r)=>L(e,typeof t!="symbol"?t+"":t,r);import{aU as E}from"./index-Da1B_bQX.js";import{a as $,b as q,t as M,s as B,H as W,p as U,F,n as z}from"./date-utils-Raxu1naD.js";const N=e=>{var t;return typeof ReadableStream=="function"&&(((t=e==null?void 0:e.constructor)==null?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)},x="The stream has already been transformed.",G=e=>{var o,s;if(!D(e)&&!N(e)){const i=((s=(o=e==null?void 0:e.__proto__)==null?void 0:o.constructor)==null?void 0:s.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${i}`)}let t=!1;const r=async()=>{if(t)throw new Error(x);return t=!0,await B(e)},n=i=>{if(typeof i.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return i.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async i=>{const c=await r();if(i==="base64")return $(c);if(i==="hex")return q(c);if(i===void 0||i==="utf8"||i==="utf-8")return M(c);if(typeof TextDecoder=="function")return new TextDecoder(i).decode(c);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(x);if(t=!0,D(e))return n(e);if(N(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},D=e=>typeof Blob=="function"&&e instanceof Blob;class O extends Error{constructor(r,n=!0){var i;let o,s=!0;typeof n=="boolean"?(o=void 0,s=n):n!=null&&typeof n=="object"&&(o=n.logger,s=n.tryNextLink??!0);super(r);b(this,"name","ProviderError");b(this,"tryNextLink");this.tryNextLink=s,Object.setPrototypeOf(this,O.prototype),(i=o==null?void 0:o.debug)==null||i.call(o,`@smithy/property-provider ${s?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}}class h extends O{constructor(r,n=!0){super(r,n);b(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,h.prototype)}}function P(e){return Promise.all(Object.keys(e).reduce((t,r)=>{const n=e[r];return typeof n=="string"?t.push([r,n]):t.push(n().then(o=>[r,o])),t},[])).then(t=>t.reduce((r,[n,o])=>(r[n]=o,r),{}))}function H(e){return async t=>{var w;(w=e.logger)==null||w.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:r,CognitoIdentityClient:n}=await E(async()=>{const{GetCredentialsForIdentityCommand:l,CognitoIdentityClient:a}=await import("./loadCognitoIdentity-iTF7T4_l.js").then(u=>u.aH);return{GetCredentialsForIdentityCommand:l,CognitoIdentityClient:a}},__vite__mapDeps([0,1,2,3,4,5])),o=l=>{var a,u,S;return((a=e.clientConfig)==null?void 0:a[l])??((u=e.parentClientConfig)==null?void 0:u[l])??((S=t==null?void 0:t.callerClientConfig)==null?void 0:S[l])},{Credentials:{AccessKeyId:s=V(e.logger),Expiration:i,SecretKey:c=Y(e.logger),SessionToken:d}=J(e.logger)}=await(e.client??new n(Object.assign({},e.clientConfig??{},{region:o("region"),profile:o("profile"),userAgentAppId:o("userAgentAppId")}))).send(new r({CustomRoleArn:e.customRoleArn,IdentityId:e.identityId,Logins:e.logins?await P(e.logins):void 0}));return{identityId:e.identityId,accessKeyId:s,secretAccessKey:c,sessionToken:d,expiration:i}}}function V(e){throw new h("Response from Amazon Cognito contained no access key ID",{logger:e})}function J(e){throw new h("Response from Amazon Cognito contained no credentials",{logger:e})}function Y(e){throw new h("Response from Amazon Cognito contained no secret key",{logger:e})}const v="IdentityIds";class Q{constructor(t="aws:cognito-identity-ids"){b(this,"dbName");this.dbName=t}getItem(t){return this.withObjectStore("readonly",r=>{const n=r.get(t);return new Promise(o=>{n.onerror=()=>o(null),n.onsuccess=()=>o(n.result?n.result.value:null)})}).catch(()=>null)}removeItem(t){return this.withObjectStore("readwrite",r=>{const n=r.delete(t);return new Promise((o,s)=>{n.onerror=()=>s(n.error),n.onsuccess=()=>o()})})}setItem(t,r){return this.withObjectStore("readwrite",n=>{const o=n.put({id:t,value:r});return new Promise((s,i)=>{o.onerror=()=>i(o.error),o.onsuccess=()=>s()})})}getDb(){const t=self.indexedDB.open(this.dbName,1);return new Promise((r,n)=>{t.onsuccess=()=>{r(t.result)},t.onerror=()=>{n(t.error)},t.onblocked=()=>{n(new Error("Unable to access DB"))},t.onupgradeneeded=()=>{const o=t.result;o.onerror=()=>{n(new Error("Failed to create object store"))},o.createObjectStore(v,{keyPath:"id"})}})}withObjectStore(t,r){return this.getDb().then(n=>{const o=n.transaction(v,t);return o.oncomplete=()=>n.close(),new Promise((s,i)=>{o.onerror=()=>i(o.error),s(r(o.objectStore(v)))}).catch(s=>{throw n.close(),s})})}}class X{constructor(t={}){b(this,"store");this.store=t}getItem(t){return t in this.store?this.store[t]:null}removeItem(t){delete this.store[t]}setItem(t,r){this.store[t]=r}}const Z=new X;function ee(){return typeof self=="object"&&self.indexedDB?new Q:typeof window=="object"&&window.localStorage?window.localStorage:Z}function te({accountId:e,cache:t=ee(),client:r,clientConfig:n,customRoleArn:o,identityPoolId:s,logins:i,userIdentifier:c=!i||Object.keys(i).length===0?"ANONYMOUS":void 0,logger:d,parentClientConfig:w}){d==null||d.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const l=c?`aws:cognito-identity-credentials:${s}:${c}`:void 0;let a=async u=>{const{GetIdCommand:S,CognitoIdentityClient:T}=await E(async()=>{const{GetIdCommand:f,CognitoIdentityClient:m}=await import("./loadCognitoIdentity-iTF7T4_l.js").then(y=>y.aH);return{GetIdCommand:f,CognitoIdentityClient:m}},__vite__mapDeps([0,1,2,3,4,5])),p=f=>{var m;return(n==null?void 0:n[f])??(w==null?void 0:w[f])??((m=u==null?void 0:u.callerClientConfig)==null?void 0:m[f])},I=r??new T(Object.assign({},n??{},{region:p("region"),profile:p("profile"),userAgentAppId:p("userAgentAppId")}));let g=l&&await t.getItem(l);if(!g){const{IdentityId:f=ne(d)}=await I.send(new S({AccountId:e,IdentityPoolId:s,Logins:i?await P(i):void 0}));g=f,l&&Promise.resolve(t.setItem(l,g)).catch(()=>{})}return a=H({client:I,customRoleArn:o,logins:i,identityId:g}),a(u)};return u=>a(u).catch(async S=>{throw l&&Promise.resolve(t.removeItem(l)).catch(()=>{}),S})}function ne(e){throw new h("Response from Amazon Cognito contained no identity ID",{logger:e})}const we=e=>H({...e}),ye=e=>te({...e}),oe="169.254.170.2",re="169.254.170.23",se="[fd00:ec2::23]",ie=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===oe||e.hostname===re||e.hostname===se)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;const r=e.hostname.split("."),n=o=>{const s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new h(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};function ce(e){return new W({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function ae(e,t){const n=await G(e.body).transformToString();if(e.statusCode===200){const o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new h("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:U(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new h(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new h(`Server responded with status: ${e.statusCode}`,{logger:t})}const de=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()},Se=(e={})=>{var s;(s=e.logger)==null||s.debug("@aws-sdk/credential-provider-http - fromHttp");let t;const r=e.credentialsFullUri;if(r)t=r;else throw new h("No HTTP credential provider host provided.",{logger:e.logger});const n=new URL(t);ie(n,e.logger);const o=new F;return de(async()=>{const i=ce(n);e.authorizationToken&&(i.headers.Authorization=e.authorizationToken);const c=await o.handle(i);return ae(c.response)},e.maxRetries??3,e.timeout??1e3)},le="us-east-1",ge=(e,t,r)=>{let n;return async(o={})=>{var u,S,T,p,I,g;const{callerClientConfig:s}=o,i=((u=e.clientConfig)==null?void 0:u.profile)??(s==null?void 0:s.profile),c=e.logger??(s==null?void 0:s.logger);c==null||c.debug("@aws-sdk/credential-providers - fromTemporaryCredentials (STS)");const d={...e.params,RoleSessionName:e.params.RoleSessionName??"aws-sdk-js-"+Date.now()};if(d!=null&&d.SerialNumber){if(!e.mfaCodeProvider)throw new h("Temporary credential requires multi-factor authentication, but no MFA code callback was provided.",{tryNextLink:!1,logger:c});d.TokenCode=await e.mfaCodeProvider(d==null?void 0:d.SerialNumber)}const{AssumeRoleCommand:w,STSClient:l}=await E(async()=>{const{AssumeRoleCommand:f,STSClient:m}=await import("./loadSts-DulsvQoO.js").then(y=>y.w);return{AssumeRoleCommand:f,STSClient:m}},__vite__mapDeps([6,2,1,3,4,5]));if(!n){const f=typeof t=="function"?t():void 0,m=[e.masterCredentials,(S=e.clientConfig)==null?void 0:S.credentials,void(s==null?void 0:s.credentials),(T=s==null?void 0:s.credentialDefaultProvider)==null?void 0:T.call(s),f];let y="STS client default credentials";if(m[0])y="options.masterCredentials";else if(m[1])y="options.clientConfig.credentials";else{if(m[2])throw y="caller client's credentials",new Error("fromTemporaryCredentials recursion in callerClientConfig.credentials");m[3]?y="caller client's credentialDefaultProvider":m[4]&&(y="AWS SDK default credentials")}const A=[(p=e.clientConfig)==null?void 0:p.region,s==null?void 0:s.region,await(r==null?void 0:r({profile:i})),le];let C="default partition's default region";A[0]?C="options.clientConfig.region":A[1]?C="caller client's region":A[2]&&(C="file or env region");const k=[K((I=e.clientConfig)==null?void 0:I.requestHandler),K(s==null?void 0:s.requestHandler)];let _="STS default requestHandler";k[0]?_="options.clientConfig.requestHandler":k[1]&&(_="caller client's requestHandler"),(g=c==null?void 0:c.debug)==null||g.call(c,`@aws-sdk/credential-providers - fromTemporaryCredentials STS client init with ${C}=${await z(R(A))()}, ${y}, ${_}.`),n=new l({userAgentAppId:s==null?void 0:s.userAgentAppId,...e.clientConfig,credentials:R(m),logger:c,profile:i,region:R(A),requestHandler:R(k)})}if(e.clientPlugins)for(const f of e.clientPlugins)n.middlewareStack.use(f);const{Credentials:a}=await n.send(new w(d));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new h(`Invalid response from STS.assumeRole call with role ${d.RoleArn}`,{logger:c});return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,credentialScope:a.CredentialScope}}},K=e=>{var t;return((t=e==null?void 0:e.metadata)==null?void 0:t.handlerProtocol)==="h2"?void 0:e},R=e=>{for(const t of e)if(t!==void 0)return t},ue=e=>async t=>{var l;(l=e.logger)==null||l.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:c,durationSeconds:d}=e;let{roleAssumerWithWebIdentity:w}=e;if(!w){const{getDefaultRoleAssumerWithWebIdentity:a}=await E(async()=>{const{getDefaultRoleAssumerWithWebIdentity:u}=await import("./index-C7uLyd3y.js");return{getDefaultRoleAssumerWithWebIdentity:u}},__vite__mapDeps([7,6,2,1,3,4,5]));w=a({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t==null?void 0:t.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return w({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:c,DurationSeconds:d})},pe=e=>ue({...e});export{we as fromCognitoIdentity,ye as fromCognitoIdentityPool,Se as fromHttp,ge as fromTemporaryCredentials,pe as fromWebToken};
